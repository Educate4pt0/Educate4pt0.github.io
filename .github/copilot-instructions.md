# Educate 4.0 - AI Coding Agent Instructions

## Project Overview
This is a Docusaurus 3.9.2 static site for an educational non-profit providing STEAM curriculum resources. The site is deployed to GitHub Pages at `educate4pt0.github.io` and targets educators/mentors delivering 40-minute tutorials to students grade 5+.

## Architecture & Key Technologies

### Core Stack
- **Docusaurus 3.9.2** (TypeScript): Static site generator with React-based components
- **Math Support**: KaTeX (via `remark-math` + `rehype-katex`) for mathematical notation
- **Diagrams**: Mermaid theme for flowcharts and diagrams
- **i18n**: Multi-language support (English, Afrikaans, Xhosa) configured in `docusaurus.config.ts`

### Custom Components
- **Quiz System** (`src/components/Quiz/`): Interactive quiz component supporting three auto-detected modes:
  - Q&A (single answer, no distractors) → expandable answer format
  - Single-select (one answer + distractors) → radio buttons
  - Multi-select (multiple answers + distractors) → checkboxes
  - Features: Fisher-Yates shuffling, immediate feedback, print-friendly output
  - Usage: Import as `<Quiz questions={[...]} />` in MDX files (see `docs/guides/quizzes.mdx`)
  - **Future enhancements**: Additional question types (ordering, fill-in-blank, matching) may be added to better serve educators

- **Homepage Components**: 
  - `HomepageMission/` - Mission statement cards with SVG icons
  - `HomepageTeam/` - Team member profiles

## Development Workflow

### Critical Setup Requirement
**IMPORTANT**: After pulling or when `remark-math`/`rehype-katex` are missing, run `npm install` before `npm start`. The error "Cannot find module 'remark-math'" indicates missing dependencies.

### Commands (npm, not yarn despite README)
```bash
npm install          # Install/sync dependencies (REQUIRED after clone)
npm start            # Dev server at localhost:3000 with hot reload
npm run build        # Production build to ./build directory
npm run typecheck    # TypeScript validation
npm run clear        # Clear Docusaurus cache if stale
```

### Nix Development Shell
Project includes `flake.nix` for reproducible Node.js 20 environment:
```bash
nix develop    # Enter shell with nodejs_20, npm, git
```

### Deployment
- **Automatic**: GitHub Actions workflow (`.github/workflows/deploy.yml`) deploys on push to `main`
- **Manual**: `npm run deploy` (requires `GIT_USER` env var or `USE_SSH=true`)

## Content Structure & Conventions

### Documentation Organization
- **Sidebar Auto-generation**: `sidebars.ts` uses `{ type: 'autogenerated', dirName: '.' }` for `resourcesSidebar`
- **Category Metadata**: Use `_category_.json` files for folder labels/positions (e.g., `docs/guides/_category_.json`)
- **Front Matter**: All docs require `sidebar_position` for ordering

### MDX Content Patterns
1. **Import Custom Components**: `import { Quiz } from '@site/src/components/Quiz';`
2. **Docusaurus Components**: Use `@theme/Tabs`, `@theme/TabItem`, `@theme/Heading` for theming consistency
3. **Admonitions**: Prefer `:::tip`, `:::warning`, `:::note` for callouts (see `docs/intro.mdx`)
4. **SVG Assets**: Import from static/docs paths: `import Logo from './img/file.svg';` then use as `<Logo />`
5. **Platform Instructions**: Use Tabs for multi-platform setup guides (see `docs/scratch/intro.mdx`)

### Tutorial Page Template
Follow the structure in `docs/scratch/intro.mdx`:
- **Metadata Table**: Grade level, time estimate, subject, objectives, prerequisites, materials, technologies
- **Setup Section**: Platform-specific installation tabs for educators
- **Interactive Elements**: Embed Quiz components for knowledge checks

### Asset Management
- Educational images/diagrams belong in `static/img/` directory
- Tutorial-specific assets go in `docs/[topic]/img/` (e.g., `docs/scratch/img/`)
- SVGs preferred for logos and icons for scalability and theme compatibility

## Styling & Theming

### CSS Architecture
- **Theme Variables**: `src/css/site-theme.css` - Custom color schemes, typography
- **Print Styles**: `src/css/print.css` - Print-optimized layouts (quiz answers visible when printed)
- **Component Modules**: CSS Modules pattern (`*.module.css`) for scoped component styles

### Color Mode
- Respects user's system preference (`respectPrefersColorScheme: true`)
- Prism themes: GitHub Light / Dracula Dark

## Important Constraints

1. **No Blog**: Disabled in preset config (`blog: false`)
2. **Strict Link Checking**: `onBrokenLinks: 'throw'` - broken internal links fail builds
3. **Node.js Version**: Requires Node.js >=20.0 (enforced in package.json)
4. **Future Compatibility**: `future.v4: true` enabled for Docusaurus v4 migration prep

## Common Tasks

### Adding a New Tutorial
1. Create MDX file in `docs/[topic]/` (e.g., `docs/scratch/my-tutorial.mdx`)
2. Add front matter with `sidebar_position: N`
3. Include metadata table for educators (grade level, time, materials)
4. Use Quiz component for knowledge assessment
5. Add multi-platform setup instructions if tech-specific

### Modifying Navigation
- **Navbar**: Edit `themeConfig.navbar` in `docusaurus.config.ts`
- **Footer**: Edit `themeConfig.footer` sections
- **Sidebar Structure**: Add `_category_.json` to folders or modify `sidebars.ts`

### Localizing Content
1. Run `npm run write-translations` to generate translation files
2. Add translated content to `i18n/[locale]/docusaurus-plugin-content-docs/current/`
3. Locale switching via navbar dropdown (configured in navbar items)

## Development Best Practices

- **TypeScript Files**: `docusaurus.config.ts` and `sidebars.ts` run in Node.js - avoid browser APIs
- **Component Imports**: Use `@site/` alias for absolute imports from project root
- **React Version**: Currently React 19 - ensure compatibility when adding dependencies
- **Accessibility**: All SVGs include `role="img"` (see component patterns)

## Documentation Philosophy

**CRITICAL**: This `.github/copilot-instructions.md` file is the single source of truth for AI agent guidance. 

- **DO NOT** create separate documentation files like `CONTRIBUTING.md`, `DEVELOPMENT.md`, `ARCHITECTURE.md`, etc.
- **DO** update this file with new patterns, discoveries, or workflow changes as you encounter them
- **DO** keep instructions concise and actionable - focus on project-specific knowledge, not generic advice
- When you discover important architectural decisions or non-obvious workflows, add them here inline within the appropriate section
